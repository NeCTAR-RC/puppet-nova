[DEFAULT]
# Logging
lock_path=/var/lock/nova
state_path=/var/lib/nova 
use_syslog=true
syslog_log_facility=LOG_DAEMON
logdir=/var/log/nova
<% if @environment == "testing" -%>
verbose=True
<%- else -%>
verbose=False
<%- end -%>
root_helper=sudo /usr/bin/nova-rootwrap
project_cert_subject=/C=AU/O=NeCTAR/CN=project-ca-%.16s-%s
user_cert_subject=/C=AU/O=NeCTAR/CN=%.16s-%.16s-%s

# Webserver config
api_paste_config=/etc/nova/api-paste.ini

# Scheduler
compute_scheduler_driver=nova.scheduler.filter_scheduler.FilterScheduler
ram_allocation_ratio=1.0
cpu_allocation_ratio=0.92
reserved_host_memory_mb=1024
reserved_host_disk_mb=0
scheduler_default_filters=ComputeFilter,CoreFilter,RamFilter
compute_fill_first_cost_fn_weight=1.0

# Authentication
keystone_ec2_url = <%= keystone_protocol %>://<%= keystone_host %>:5000/v2.0/ec2tokens
auth_strategy=keystone
keystone_auth_url=<%= keystone_protocol %>://<%= keystone_host %>:5000/v2.0

# Image Service
image_service=nova.image.glance.GlanceImageService
glance_api_servers=<%= glance_host %>:9292

# Storage Service
s3_host=<%= s3_host %>
s3_dmz=<%= s3_host %>
s3_port=8888
<% if swift_protocol == 'https' %>
s3_use_ssl=True
<% end %>

# Nova RPC
rpc_response_timeout=240

# RabbitMQ
rabbit_host=<%= rabbitmq_host %>
rabbit_userid=<%= nova_rabbit_user %>
rabbit_password=<%= nova_rabbit_pass %>
rabbit_durable_queues=True
<% if nova_rabbitmq_ssl %>
rabbit_use_ssl=True
rabbit_port=5671
<% end %>

# Database
sql_connection=mysql://<%= nova_db_user %>:<%= nova_db_pass %>@<%= nova_db_host %>/nova

# Memcached
memcached_servers=<%= nova_memcached_servers %>

# VNC
novncproxy_base_url=http://<%= nova_vnc_host %>:6080/vnc_auto.html

# Quota
quota_instances=2
quota_cores=2
quota_ram=8192
quota_volumes=0
quota_gigabytes=0
quota_floating_ips=0

<% if nova_volume_type == 'nexenta' %>
# Nexenta Volume
volume_driver=nova.volume.nexenta.volume.NexentaDriver
nexenta_host=<%= nexenta_host %>
nexenta_volume=nova
nexenta_user=<%= nexenta_user %>
nexenta_password=<%= nexenta_pass %>
use_local_volume=False
<% end %>
